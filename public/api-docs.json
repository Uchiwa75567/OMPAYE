{
    "openapi": "3.0.0",
    "info": {
        "title": "OM Paye API",
        "description": "API pour OM Paye - Système de paiement mobile",
        "version": "1.0.0"
    },
    "paths": {
        "/api/admin/users": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Liste des utilisateurs avec filtres",
                "operationId": "8734f0eb21eaec99b614d902ba09f030",
                "parameters": [
                    {
                        "name": "type",
                        "in": "query",
                        "description": "Filtrer par type d'utilisateur",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "admin",
                                "marchand",
                                "utilisateur"
                            ]
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Rechercher par nom, prénom ou téléphone",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Numéro de page",
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Nombre d'éléments par page",
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des utilisateurs",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autorisé"
                    },
                    "403": {
                        "description": "Accès administrateur requis"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/admin/users/{id}": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Détails d'un utilisateur spécifique",
                "operationId": "fce593e8f474c12b3b475c00ca61f822",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de l'utilisateur",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails utilisateur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "user": {
                                            "type": "object"
                                        },
                                        "compte": {
                                            "type": "object"
                                        },
                                        "transactions": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "statistiques": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouvé"
                    },
                    "401": {
                        "description": "Non autorisé"
                    },
                    "403": {
                        "description": "Accès administrateur requis"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Admin"
                ],
                "summary": "Supprimer un utilisateur",
                "operationId": "44eee40ddd4c6892e817da79193968d2",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de l'utilisateur à supprimer",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Utilisateur supprimé",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Utilisateur non trouvé"
                    },
                    "401": {
                        "description": "Non autorisé"
                    },
                    "403": {
                        "description": "Accès administrateur requis"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/admin/transactions": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Toutes les transactions avec filtres",
                "operationId": "ffa4d9d0d6b7c1dd523cda0426235a11",
                "parameters": [
                    {
                        "name": "type",
                        "in": "query",
                        "description": "Filtrer par type de transaction",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "transfert",
                                "paiement",
                                "depot",
                                "retrait"
                            ]
                        }
                    },
                    {
                        "name": "statut",
                        "in": "query",
                        "description": "Filtrer par statut",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pending",
                                "completed",
                                "failed",
                                "cancelled"
                            ]
                        }
                    },
                    {
                        "name": "date_debut",
                        "in": "query",
                        "description": "Date de début (YYYY-MM-DD)",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "date_fin",
                        "in": "query",
                        "description": "Date de fin (YYYY-MM-DD)",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Numéro de page",
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Nombre d'éléments par page",
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des transactions",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autorisé"
                    },
                    "403": {
                        "description": "Accès administrateur requis"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/admin/statistiques": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Statistiques globales du système",
                "operationId": "948f8c365fe88b15fe68a9b596a28eb2",
                "responses": {
                    "200": {
                        "description": "Statistiques globales",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "utilisateurs": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "utilisateurs_normaux": {
                                                    "type": "integer"
                                                },
                                                "marchands": {
                                                    "type": "integer"
                                                },
                                                "admins": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "transactions": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "total_montant": {
                                                    "type": "integer"
                                                },
                                                "transferts": {
                                                    "type": "integer"
                                                },
                                                "paiements": {
                                                    "type": "integer"
                                                },
                                                "depots": {
                                                    "type": "integer"
                                                },
                                                "retraits": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "solde_total": {
                                            "type": "integer"
                                        },
                                        "periode": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autorisé"
                    },
                    "403": {
                        "description": "Accès administrateur requis"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/admin/marchands": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Liste des marchands avec leurs codes",
                "operationId": "09d7c5d907d5b89a8aa4edcb37095519",
                "parameters": [
                    {
                        "name": "actif",
                        "in": "query",
                        "description": "Filtrer par statut actif/inactif",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Numéro de page",
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Nombre d'éléments par page",
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des marchands",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autorisé"
                    },
                    "403": {
                        "description": "Accès administrateur requis"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/admin/marchands/{id}/toggle-status": {
            "put": {
                "tags": [
                    "Admin"
                ],
                "summary": "Activer/désactiver un code marchand",
                "operationId": "30eb2e023dd7139f9f961f1c777ce3a1",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de l'utilisateur marchand",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "actif"
                                ],
                                "properties": {
                                    "actif": {
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Statut mis à jour",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "marchand": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Marchand non trouvé"
                    },
                    "401": {
                        "description": "Non autorisé"
                    },
                    "403": {
                        "description": "Accès administrateur requis"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/register": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Créer un nouveau compte utilisateur (admin only)",
                "operationId": "c7bb21a0d87049e161b8e4c9b0d909f2",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "nom",
                                    "prenom",
                                    "email",
                                    "telephone",
                                    "sexe",
                                    "type"
                                ],
                                "properties": {
                                    "nom": {
                                        "type": "string",
                                        "example": "Diallo"
                                    },
                                    "prenom": {
                                        "type": "string",
                                        "example": "Amadou"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email",
                                        "example": "amadou.diallo@example.com"
                                    },
                                    "telephone": {
                                        "type": "string",
                                        "example": "781234567"
                                    },
                                    "sexe": {
                                        "type": "string",
                                        "enum": [
                                            "M",
                                            "F"
                                        ],
                                        "example": "M"
                                    },
                                    "type": {
                                        "type": "string",
                                        "enum": [
                                            "marchand",
                                            "utilisateur"
                                        ],
                                        "example": "utilisateur"
                                    },
                                    "password": {
                                        "type": "string",
                                        "example": "motdepasse123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Compte créé avec succès"
                    },
                    "403": {
                        "description": "Accès non autorisé - admin only"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/send-otp": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Envoyer un code OTP par SMS",
                "operationId": "bffceebe22269794653d542fb5e548dd",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "telephone"
                                ],
                                "properties": {
                                    "telephone": {
                                        "type": "string",
                                        "example": "782345678"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OTP envoyé"
                    },
                    "400": {
                        "description": "Numéro invalide"
                    }
                }
            }
        },
        "/api/auth/verify-otp": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Vérifier le code OTP et obtenir un token",
                "operationId": "abcb5741589707b15c7ecac7a67c13aa",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "telephone",
                                    "code"
                                ],
                                "properties": {
                                    "telephone": {
                                        "type": "string",
                                        "example": "782345678"
                                    },
                                    "code": {
                                        "type": "string",
                                        "example": "123456"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Token généré",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "access_token": {
                                            "type": "string"
                                        },
                                        "refresh_token": {
                                            "type": "string"
                                        },
                                        "token_type": {
                                            "type": "string"
                                        },
                                        "expires_at": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Code invalide"
                    }
                }
            }
        },
        "/api/auth/login": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Connexion avec téléphone et mot de passe",
                "operationId": "dd51a484b7fa0f97c7680fdbde14cf5f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "telephone",
                                    "password"
                                ],
                                "properties": {
                                    "telephone": {
                                        "type": "string",
                                        "example": "782345678"
                                    },
                                    "password": {
                                        "type": "string",
                                        "example": "motdepasse123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Connexion réussie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "access_token": {
                                            "type": "string"
                                        },
                                        "token_type": {
                                            "type": "string"
                                        },
                                        "user": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Identifiants invalides"
                    }
                }
            }
        },
        "/api/auth/logout": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Déconnexion",
                "operationId": "df9bdc6c7a6d9f20b983526b2ec0f698",
                "responses": {
                    "200": {
                        "description": "Déconnexion réussie"
                    },
                    "401": {
                        "description": "Token invalide"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/me": {
            "get": {
                "tags": [
                    "Auth"
                ],
                "summary": "Obtenir les informations de l'utilisateur connecté",
                "operationId": "b5de204f5e452ef51327c691aa99e77c",
                "responses": {
                    "200": {
                        "description": "Informations utilisateur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "user": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Token invalide"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/comptes/dashboard": {
            "get": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Obtenir le tableau de bord du compte connecté",
                "operationId": "3f56eec168c486d5cdb5b537639014c3",
                "responses": {
                    "200": {
                        "description": "Informations du tableau de bord",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "user": {
                                            "type": "object"
                                        },
                                        "compte": {
                                            "type": "object"
                                        },
                                        "transactions_recentes": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "statistiques": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Compte non trouvé"
                    },
                    "403": {
                        "description": "Accès non autorisé"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/comptes/solde": {
            "get": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Obtenir le solde du compte",
                "operationId": "7d1811c8589cccff154f7c087c224f35",
                "responses": {
                    "200": {
                        "description": "Solde du compte",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "solde": {
                                            "description": "Solde en centimes",
                                            "type": "integer"
                                        },
                                        "solde_formate": {
                                            "description": "Solde formaté en FCFA",
                                            "type": "string"
                                        },
                                        "derniere_maj": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Compte non trouvé"
                    },
                    "403": {
                        "description": "Accès non autorisé"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/comptes/transactions": {
            "get": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Obtenir l'historique des transactions",
                "operationId": "cb9d593a3e10e658c6666faa469d390a",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Numéro de page",
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Nombre d'éléments par page",
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "description": "Filtrer par type de transaction",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "transfert",
                                "paiement",
                                "depot",
                                "retrait"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des transactions",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "pagination": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Compte non trouvé"
                    },
                    "403": {
                        "description": "Accès non autorisé"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/comptes/transfert": {
            "post": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Effectuer un transfert (utilise le token pour l'expéditeur)",
                "description": "Effectue un transfert d'argent de l'utilisateur connecté vers un destinataire. Le numéro et l'authentification de l'expéditeur sont déduits du token.",
                "operationId": "62f381490e92570cff809feff8558414",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "telephone_destinataire",
                                    "montant"
                                ],
                                "properties": {
                                    "telephone_destinataire": {
                                        "type": "string",
                                        "example": "771234563"
                                    },
                                    "montant": {
                                        "description": "Montant en FCFA",
                                        "type": "integer",
                                        "example": "5000"
                                    },
                                    "motif": {
                                        "type": "string",
                                        "example": "Transfert d'argent"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Transfert effectué",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "transaction": {
                                            "type": "object"
                                        },
                                        "solde_restant": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de validation"
                    },
                    "403": {
                        "description": "Accès non autorisé"
                    },
                    "404": {
                        "description": "Compte destinataire non trouvé"
                    },
                    "422": {
                        "description": "Solde insuffisant"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/comptes/{num}/transfert": {
            "post": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Effectuer un transfert (route compatibilité avec numéro)",
                "operationId": "a6444498aea55c690835c6b1c2ce0296",
                "parameters": [
                    {
                        "name": "num",
                        "in": "path",
                        "description": "Numéro de téléphone de l'expéditeur",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "782345678"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "telephone_destinataire",
                                    "montant",
                                    "password"
                                ],
                                "properties": {
                                    "telephone_destinataire": {
                                        "type": "string",
                                        "example": "783456789"
                                    },
                                    "montant": {
                                        "description": "Montant en FCFA",
                                        "type": "integer",
                                        "example": "1000"
                                    },
                                    "password": {
                                        "type": "string",
                                        "example": "motdepasse123"
                                    },
                                    "motif": {
                                        "type": "string",
                                        "example": "Transfert d'argent"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Transfert effectué",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "transaction": {
                                            "type": "object"
                                        },
                                        "solde_restant": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de validation"
                    },
                    "403": {
                        "description": "Mot de passe incorrect"
                    },
                    "404": {
                        "description": "Compte destinataire non trouvé"
                    },
                    "422": {
                        "description": "Solde insuffisant"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/comptes/paiement": {
            "post": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Effectuer un paiement (utilise le token pour le payeur)",
                "description": "Effectue un paiement via téléphone ou code marchand. L'utilisateur payeur et l'authentification sont déduits du token.",
                "operationId": "186a9d16c3f3c4d47408682ed011235f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "oneOf": [
                                    {
                                        "required": [
                                            "type",
                                            "identifiant_destinataire",
                                            "montant"
                                        ],
                                        "properties": {
                                            "type": {
                                                "type": "string",
                                                "enum": [
                                                    "telephone"
                                                ],
                                                "example": "telephone"
                                            },
                                            "identifiant_destinataire": {
                                                "type": "string",
                                                "example": "771234563"
                                            },
                                            "montant": {
                                                "type": "integer",
                                                "example": "1500"
                                            },
                                            "motif": {
                                                "type": "string",
                                                "example": "Paiement ami"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    {
                                        "required": [
                                            "type",
                                            "identifiant_destinataire",
                                            "montant"
                                        ],
                                        "properties": {
                                            "type": {
                                                "type": "string",
                                                "enum": [
                                                    "code_marchand"
                                                ],
                                                "example": "code_marchand"
                                            },
                                            "identifiant_destinataire": {
                                                "type": "string",
                                                "example": "MBO001"
                                            },
                                            "montant": {
                                                "type": "integer",
                                                "example": "2500"
                                            },
                                            "motif": {
                                                "type": "string",
                                                "example": "Achat articles"
                                            }
                                        },
                                        "type": "object"
                                    }
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Paiement effectué",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "transaction": {
                                            "type": "object"
                                        },
                                        "solde_restant": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de validation"
                    },
                    "403": {
                        "description": "Accès non autorisé"
                    },
                    "404": {
                        "description": "Marchand ou destinataire non trouvé"
                    },
                    "422": {
                        "description": "Solde insuffisant"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/comptes/{num}/paiement": {
            "post": {
                "tags": [
                    "Comptes"
                ],
                "summary": "Effectuer un paiement (route compatibilité avec numéro)",
                "operationId": "3e67bb7d6c9419908f372ea9d8b4ca72",
                "parameters": [
                    {
                        "name": "num",
                        "in": "path",
                        "description": "Numéro de téléphone du payeur",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "782345678"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "oneOf": [
                                    {
                                        "required": [
                                            "type",
                                            "identifiant_destinataire",
                                            "montant",
                                            "password"
                                        ],
                                        "properties": {
                                            "type": {
                                                "type": "string",
                                                "enum": [
                                                    "telephone"
                                                ],
                                                "example": "telephone"
                                            },
                                            "identifiant_destinataire": {
                                                "type": "string",
                                                "example": "783456789"
                                            },
                                            "montant": {
                                                "type": "integer",
                                                "example": "1500"
                                            },
                                            "password": {
                                                "type": "string",
                                                "example": "motdepasse123"
                                            },
                                            "motif": {
                                                "type": "string",
                                                "example": "Paiement marchand"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    {
                                        "required": [
                                            "type",
                                            "identifiant_destinataire",
                                            "montant",
                                            "password"
                                        ],
                                        "properties": {
                                            "type": {
                                                "type": "string",
                                                "enum": [
                                                    "code_marchand"
                                                ],
                                                "example": "code_marchand"
                                            },
                                            "identifiant_destinataire": {
                                                "type": "string",
                                                "example": "M123456"
                                            },
                                            "montant": {
                                                "type": "integer",
                                                "example": "2500"
                                            },
                                            "password": {
                                                "type": "string",
                                                "example": "motdepasse123"
                                            },
                                            "motif": {
                                                "type": "string",
                                                "example": "Achat marchand"
                                            }
                                        },
                                        "type": "object"
                                    }
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Paiement effectué",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        },
                                        "transaction": {
                                            "type": "object"
                                        },
                                        "solde_restant": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de validation"
                    },
                    "403": {
                        "description": "Mot de passe incorrect"
                    },
                    "404": {
                        "description": "Marchand non trouvé"
                    },
                    "422": {
                        "description": "Solde insuffisant"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/marchand/generate-qr": {
            "post": {
                "tags": [
                    "Marchand"
                ],
                "summary": "Générer un QR code de paiement",
                "operationId": "a9539ecd0eed48cadbd6c863013c93fa",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "montant"
                                ],
                                "properties": {
                                    "montant": {
                                        "type": "integer",
                                        "example": 15000
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "QR généré",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "code": {
                                            "type": "string"
                                        },
                                        "lien": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autorisé"
                    },
                    "403": {
                        "description": "Rôle marchand requis"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/qr/{code}": {
            "get": {
                "tags": [
                    "Marchand"
                ],
                "summary": "Afficher les infos du QR code",
                "operationId": "a124d345b073fa504e7b2124ba297fa9",
                "parameters": [
                    {
                        "name": "code",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Infos QR",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "marchand": {
                                            "type": "string"
                                        },
                                        "montant": {
                                            "type": "integer"
                                        },
                                        "code": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "QR non trouvé"
                    }
                }
            }
        },
        "/api/compte": {
            "get": {
                "summary": "Informations du compte utilisateur",
                "operationId": "95b6694a3fec01268d56823f5fcb7e72",
                "responses": {
                    "200": {
                        "description": "Informations du compte",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "solde": {
                                            "description": "Solde en centimes",
                                            "type": "integer"
                                        },
                                        "type": {
                                            "description": "Type de compte",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autorisé"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/historique": {
            "get": {
                "summary": "Historique des transactions",
                "operationId": "b40f820f0e2f668b39c34be4a271af95",
                "responses": {
                    "200": {
                        "description": "Liste des transactions",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "montant": {
                                                        "type": "integer"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autorisé"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/transactions/depot": {
            "post": {
                "tags": [
                    "Transaction"
                ],
                "summary": "Effectuer un dépôt d'argent",
                "operationId": "69adea14cdaed7ebf3b765eb7d733424",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "montant",
                                    "agent_id"
                                ],
                                "properties": {
                                    "montant": {
                                        "description": "Montant en XOF (5000 = 5000 XOF)",
                                        "type": "integer",
                                        "example": 5000
                                    },
                                    "agent_id": {
                                        "description": "ID de l'agent distributeur obligatoire",
                                        "type": "string",
                                        "example": "uuid"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Dépôt réussi"
                    },
                    "400": {
                        "description": "Montant invalide ou agent invalide"
                    },
                    "401": {
                        "description": "Non autorisé"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/transactions/retrait": {
            "post": {
                "tags": [
                    "Transaction"
                ],
                "summary": "Effectuer un retrait d'argent",
                "operationId": "5f0d670067719928d88a7dd91657ddd2",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "montant",
                                    "agent_id",
                                    "pin"
                                ],
                                "properties": {
                                    "montant": {
                                        "description": "Montant en XOF",
                                        "type": "integer",
                                        "example": 2000
                                    },
                                    "agent_id": {
                                        "type": "string",
                                        "example": "uuid"
                                    },
                                    "pin": {
                                        "type": "string",
                                        "example": "1234"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Retrait réussi"
                    },
                    "400": {
                        "description": "PIN invalide ou solde insuffisant"
                    },
                    "401": {
                        "description": "Non autorisé"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/transactions/transfert": {
            "post": {
                "tags": [
                    "Transaction"
                ],
                "summary": "Transférer de l'argent",
                "operationId": "a4932b3c77b98e547cb00db6e93c802f",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "telephone_dest",
                                    "montant",
                                    "pin"
                                ],
                                "properties": {
                                    "telephone_dest": {
                                        "type": "string",
                                        "example": "781234567"
                                    },
                                    "montant": {
                                        "description": "Montant en XOF",
                                        "type": "integer",
                                        "example": 5000
                                    },
                                    "pin": {
                                        "type": "string",
                                        "example": "1234"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Solde insuffisant ou PIN incorrect"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/transactions/paiement": {
            "post": {
                "tags": [
                    "Transaction"
                ],
                "summary": "Effectuer un paiement via QR",
                "operationId": "918a290b059547769c9da3789d860cc7",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "code_qr",
                                    "montant",
                                    "pin"
                                ],
                                "properties": {
                                    "code_qr": {
                                        "type": "string",
                                        "example": "OM-ABC123"
                                    },
                                    "montant": {
                                        "description": "Montant en XOF",
                                        "type": "integer",
                                        "example": 10000
                                    },
                                    "pin": {
                                        "type": "string",
                                        "example": "1234"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Paiement réussi",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "QR invalide ou solde insuffisant"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "components": {
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "description": "Token JWT pour l'authentification",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Admin",
            "description": "Admin"
        },
        {
            "name": "Auth",
            "description": "Auth"
        },
        {
            "name": "Comptes",
            "description": "Comptes"
        },
        {
            "name": "Marchand",
            "description": "Marchand"
        },
        {
            "name": "Transaction",
            "description": "Transaction"
        }
    ]
}